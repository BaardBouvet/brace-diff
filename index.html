<!DOCTYPE html>
<html lang="en">
<head>
  <title>Fun with Diffing</title>
  <script src="libs/jquery.js"></script>
  <script src="libs/diff_match_patch.js"></script>
  <link rel=stylesheet href="style.css">
</head>
<body>


<div id="flex-container">
  <div>

<div id="editor1">function testing(items) {
  var x = "All this is syntax highlighted";
  var y = "this is a new row";

  _.each(items, function(item) {
    return item.something();
  });

  // something else
  return y;
}</div>

  </div>
  <div id="diffGutter"></div>
  <div>

<div id="editor2">function testing(items) {
  var x = "All this is syntax highlighted";

  _.each(items, function(item) {
    var bob = 1;
    return item.something();
  });

  /*
  Holy moly! The old version has a long comment
  inserted here at the end.
  */

  // something else
  return y;
}</div>

  </div>
</div>


<div id="optionPanel">
  <input type="checkbox" id="autoDiff" />
    <label for="autoDiff">Realtime diffing</label>

  <span class="divider">|</span>

  Visualize diffs:
    <input type="radio" name="diffVisFormat" id="diffVisFormat1" value="fullLine" />
      <label for="diffVisFormat1">Full Line</label>
    <input type="radio" name="diffVisFormat" id="diffVisFormat2" value="text" checked="checked" />
      <label for="diffVisFormat2">Text</label>
</div>

<script>

  // controls
  $(function () {

    var aceDiffer = new AceDiff(null, { });


    $("#autoDiff").on("click", function (e) {
      if (e.target.checked) {
        editors.left.ace.on("change", diff);
        editors.right.ace.on("change", diff);
        diff();
      } else {
        editors.left.ace.off("change", diff);
        editors.right.ace.off("change", diff);
      }
    });

    $('[name="diffVisFormat"]').on("change", function (e) {
      visFormat = e.target.value;
      aceDiffer.diff();
    });
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.8/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="ace-diff.js"></script>

</body>
</html>
