<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ace-diff</title>
    <script src="libs/jquery.js"></script>
    <script src="libs/diff_match_patch.js"></script>
    <link rel=stylesheet href="site/bootstrap.min.css">
    <link rel=stylesheet href="site/styles.css">
    <link rel=stylesheet href="site/demo1/styles.css">
    <style type="text/css">
        #flex-container {
            top: 0px !important;
        }
    </style>
</head>
<body>

<div id="flex-container">
    <div><div id="acediff-left-editor"></div></div>
    <div class="acediff-gutter"></div>
    <div>
    <div><div id="acediff-right-editor"></div></div>
</div>


<script>
$(function () {
    var aceDiffer = new AceDiff({
        mode: "ace/mode/javascript",
        left: {
            content: $("#content1").html()
        },
        right: {
            content: $("#content2").html()
        }
    });
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.8/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="dist/ace-diff.js"></script>
<script src="site/js/bootstrap.min.js"></script>


<!-- for illustration purposes -->
<div id="content1" style="display:none">
  var AceDiff = function(options) {
    this.options = {};
    extend(true, this.options, {
      element: null,
      mode: null,
      lockScrolling: false,
      left: {
        id: 'acediff-left-editor',
        content: null,
        mode: null,
        editable: true
      },
      right: {
        id: 'acediff-right-editor',
        content: null,
        mode: null,
        editable: false
      }
    }, options);

    // instantiate the editors in an internal data structure that will store a little info about the diffs and
    // editor content
    this.editors = {
      left: {
        ace: ace.edit(this.options.left.id),
        markers: [],
        lineLengths: []
      }
    };

    this.addEventHandlers();

    this.lineHeight = this.editors.left.ace.renderer.lineHeight; // assumption: both editors have same line heights
    var $gutter = $("." + this.options.classes.gutter);
    this.gutterHeight = $gutter.height();
    this.gutterWidth = $gutter.width();

    this.editors.left.ace.getSession().setMode(this.getMode(C.EDITOR_LEFT));
    this.editors.right.ace.getSession().setMode(this.getMode(C.EDITOR_RIGHT));
    this.editors.left.ace.setReadOnly(!this.options.left.editable);
    this.editors.right.ace.setReadOnly(!this.options.right.editable);

    this.createCopyContainers();
    this.createGutter();

    this.diff();
  };
  var AceDiff = function(options) {
    this.options = {};
    extend(true, this.options, {
      element: null,
      mode: null,
      lockScrolling: false,
      left: {
        id: 'acediff-left-editor',
        content: null,
        mode: null,
        editable: true
      },
      right: {
        id: 'acediff-right-editor',
        content: null,
        mode: null,
        editable: false
      }
    }, options);

    // instantiate the editors in an internal data structure that will store a little info about the diffs and
    // editor content
    this.editors = {
      left: {
        ace: ace.edit(this.options.left.id),
        markers: [],
        lineLengths: []
      }
    };

    this.addEventHandlers();

    this.lineHeight = this.editors.left.ace.renderer.lineHeight; // assumption: both editors have same line heights
    var $gutter = $("." + this.options.classes.gutter);
    this.gutterHeight = $gutter.height();
    this.gutterWidth = $gutter.width();

    this.editors.left.ace.getSession().setMode(this.getMode(C.EDITOR_LEFT));
    this.editors.right.ace.getSession().setMode(this.getMode(C.EDITOR_RIGHT));
    this.editors.left.ace.setReadOnly(!this.options.left.editable);
    this.editors.right.ace.setReadOnly(!this.options.right.editable);

    this.createCopyContainers();
    this.createGutter();

    this.diff();
  };
</div>

<div id="content2" style="display:none">
  var AceDiff = function(options) {
    this.options = {};
    extend(true, this.options, {
      left: {
        id: 'acediff-left-editor',
        content: null,

        mode: null,
        editable: true
      },
      right: {
        id: 'acediff-right-editor',
        content: null,
        mode: null,
        editable: false
      },
      showDiffs: true,
      showConnectors: true,
      maxDiffs: 5000
    }, options);

    // instantiate the editors in an internal data structure that will store a little info about the diffs and
    // editor content
    this.editors = {
      left: {
        ace: ace.edit(this.options.left.id),
        markers: [],
        lineLengths: []
      },
      right: {
        ace: ace.edit(this.options.right.id),
        markers: [],
        lineLengths: []
      }
    };

    this.addEventHandlers();

    this.lineHeight = this.editors.left.ace.renderer.lineHeight; // assumption: both editors have same line heights
    var $gutter = $("." + this.options.classes.gutter);
    this.gutterHeight = $gutter.height();
    this.gutterWidth = $gutter.width();

    // set up the editors
    this.editors.left.ace.getSession().setMode(this.getMode(C.EDITOR_LEFT));
    this.editors.right.ace.getSession().setMode(this.getMode(C.EDITOR_RIGHT));
    this.editors.left.ace.setReadOnly(!this.options.left.editable);
    this.editors.right.ace.setReadOnly(!this.options.right.editable);
  };
  var AceDiff = function(options) {
    this.options = {};
    extend(true, this.options, {
      element: null,
      mode: null,
      lockScrolling: false,
      left: {
        id: 'acediff-left-editor',
        content: null,
        mode: null,
        editable: true
      },
      right: {
        id: 'acediff-right-editor',
        content: null,
        mode: null,
        editable: false
      }
    }, options);

    // instantiate the editors in an internal data structure that will store a little info about the diffs and
    // editor content
    this.editors = {
      left: {
        ace: ace.edit(this.options.left.id),
        markers: [],
        lineLengths: []
      }
    };

    this.addEventHandlers();

    this.lineHeight = this.editors.left.ace.renderer.lineHeight; // assumption: both editors have same line heights
    var $gutter = $("." + this.options.classes.gutter);
    this.gutterHeight = $gutter.height();
    this.gutterWidth = $gutter.width();

    this.editors.left.ace.getSession().setMode(this.getMode(C.EDITOR_LEFT));
    this.editors.right.ace.getSession().setMode(this.getMode(C.EDITOR_RIGHT));
    this.editors.left.ace.setReadOnly(!this.options.left.editable);
    this.editors.right.ace.setReadOnly(!this.options.right.editable);

    this.createCopyContainers();
    this.createGutter();

    this.diff();
  };
</div>
</body>
</html>
